(function(t){function i(t){return function(){var i=new this.Chain;return i.init(t,arguments)}}function n(t){return function(){return this.addFunctionToQueue(t,arguments)}}t.ChainValidator={},t.ChainValidator.Chain=function(){this.Validator=new t.Validator,this.tokenQueue=[],this.Lexer=new t.Lexer},t.ChainValidator.Chain.prototype.validate=function(t){var i=this.Validator.validate({result:[t,this.tokenQueue]});return i.result},t.ChainValidator.Chain.prototype.init=function(t,i){return i=Array.prototype.slice.call(i,0),this.addToken([this.Lexer.TOKEN_TYPE_IDENTIFIER,t+":"+i.join(",")]),this},t.ChainValidator.Chain.prototype.addToken=function(t){this.tokenQueue.push(t)},t.ChainValidator.Chain.prototype.addTokena=function(t){this.tokenQueue=this.tokenQueue.concat(t)},t.ChainValidator.Chain.prototype.getTokens=function(){return this.tokenQueue},t.ChainValidator.Chain.prototype.or=function(t){return this.addToken([this.Lexer.TOKEN_TYPE_OPERATOR,1]),this.addToken([this.Lexer.TOKEN_TYPE_SUB_OPEN]),this.addTokens(t.getTokens()),this.addToken([this.Lexer.TOKEN_TYPE_SUB_CLOSE]),this},t.ChainValidator.Chain.prototype.and=function(t){return this.addToken([this.Lexer.TOKEN_TYPE_OPERATOR,2]),this.addToken([this.Lexer.TOKEN_TYPE_SUB_OPEN]),this.addTokens(t.getTokens()),this.addToken([this.Lexer.TOKEN_TYPE_SUB_CLOSE]),this},t.ChainValidator.Chain.prototype.addFunctionToQueue=function(t,i){return i=Array.prototype.slice.call(i,0),this.addToken([this.Lexer.TOKEN_TYPE_OPERATOR,2]),this.addToken([this.Lexer.TOKEN_TYPE_IDENTIFIER,t+":"+i.join(",")]),this},t.ChainValidator.Validator=new t.Validator({});var e=t.ChainValidator.Validator.getFunctions();for(var o in e)e[o],t.ChainValidator[o]=i(o),t.ChainValidator.Chain.prototype[o]=n(o);t.ChainValidator.addFunction=function(t,i){this.Validator.addFunction(t,i),this[o]=getChainValidatorFunction(t,this),this.Chain.prototype[o]=getChainFunction(o)}})(window.Pupil);